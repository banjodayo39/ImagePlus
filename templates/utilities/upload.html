{% extends 'base.html' %}

{% block body %}

    <div class="container">
        {% if filename %}
	    <div class="center">
            <div class="container">
                <div class="pricing-box selected">
                    <img src="{{ url_for('display_image', filename=filename) }}" alt="starter">
                    <h6 class="font-weight-medium title-text">Resultant image</h6>
                    <h1 class="text-amount mb-4 mt-2">$45</h1>
                    <div class="center">
                        <a href="#" class="btn btn-primary">Download </a>
                        <a href="#" class="btn btn-upload">Retry</a>
                    </div>
                </div>
            </div>	
	    <div>
        {% else %}
        <div class="center">
            <form method="POST" action="/upload-image/{{feature}}" enctype="multipart/form-data" class="title-upload">
                <div class="frame-upload">
                    <div class="center-upload">
                        <div class="title-upload">
                            <h1>Drag file or Click into box to upload</h1>
                        </div>
                
                        <div class="dropzone-upload">
                            <img src="static/images/upload.svg" class="upload-icon" id="image-uploaded" />
                            <input type="file" class="upload-input" onchange="readURL(this);" id="image" name="image"  accept="image/png, image/jpeg">
                            <input type="hidden" name="feature" value=feature/>
                        </div>
                        <button type="submit" class="btn-upload" name="uploadbutton">Upload file</button>
                
                    </div>
                </div>
            </form>
        </div>
    {% endif %}
    </div>
</div>

<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#image-uploaded')
                    .attr('src', e.target.result)
                    .width(100)
                    .height(50);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }
</script>
{% endblock %}
